# マルミエ ダッシュボード

医療機関向けの統合分析ダッシュボード「マルミエ」の Next.js 版です。  
CSV 解析・月次フィルタ・予約分析をブラウザだけで完結できるよう再構築しています。

## 開発環境

- Node.js 20 以上（Vercel でも同バージョンを推奨）
- npm を使用（依存関係はルート `package-lock.json` 管理）

```bash
npm install
npm run dev
```

開発サーバー: http://localhost:3000

## コマンド一覧

| コマンド           | 説明                                   |
|--------------------|----------------------------------------|
| `npm run dev`      | 開発サーバーを起動（Turbopack）        |
| `npm run lint`     | ESLint による静的解析                  |
| `npm run build`    | 本番ビルド（Next.js 15 + Turbopack）   |
| `npm start`        | ビルド成果物のローカルプレビュー       |

## 構成のポイント

- **Next.js 14 / App Router**  
  Tailwind CSS (v4) と Lucide アイコンで UI を刷新しています。

- **CSV 解析ロジック**  
  Papaparse + date-fns(+tz) を用いて予約・リスティング・アンケート CSV をバリデーション付きで取り込みます。  
  解析範囲は 2025-10-02 以降のデータに自動絞り込み。

- **インタラクティブな予約分析**  
  Recharts による時間帯ヒートマップ・日別トレンドを実装済み。  
  月次フィルタは読み込み済みデータから自動抽出します。

- **完全ローカル処理**  
  CSV のアップロードから解析までブラウザ内で完結し、データは外部送信しません。

## Vercel デプロイ

1. GitHub リポジトリを Vercel に連携  
2. `npm install`, `npm run build`, `npm start` をデフォルト設定のまま利用可能  
3. Turbopack ルートは `next.config.ts` で `__dirname` に固定済み

環境変数は不要です。CSV はローカルで読み込む想定のため、サーバー側での追加設定は必要ありません。

## 今後の実装予定

- ローカル保存（JSON/統合CSV）と復元機能
- PDF レポート出力
- アンケート / リスティング 深掘りビュー
- 相関分析とコメントメモ機能

ご要望や不具合は issue へお気軽にどうぞ。
